{% extends "base.html.j2" %}
{'css' : 'index'}
{'js' : 'index'}

{% block title %}Index{% endblock %}

{% block content %}
	<div id="banner">
	    <div class="row">
	        <div id="banner_text" class="medium-7 large-6 columns">
	            <h1>Rédigez facilement</h1>
	            <p class="subheader">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	            <button class="button">Take a Tour</button>
	            <button class="button highlight">Start a free trial</button>
	        </div>
	    </div>
	</div>

    <form action="/" id="myform" method="post">
        <div class="row">
            <h1> </h1>
        </div>

        <div class="row">
            <div class="medium-8 columns">
                <div class="row">
                    <textarea id="myta" class="main-text" name="text" form="myform">
                        {% for t in text -%}
                        {% set outer_loop = loop -%}
                            {% for warning in warnings -%}
                                {% if outer_loop.index0 == warning.start %}
                                    <span id="warning-{{ warning.index }}" style="background-color: #ffe18f;">
                                {% endif %}
                            {%- endfor -%}
                            {{ t }}
                            {%- for warning in warnings -%}
                                {% if outer_loop.index0 == warning.end -%}
                                    </span>
                                {%- endif %}
                            {%- endfor %}
                        {%- endfor %}
                    </textarea>
                </div>
                <br>
                <div class="row">
                    <input type="submit" class="button">
                </div>
            </div>
            <div class="medium-4 columns">
                {% if warnings %}
                    <div class="callout">
                        <h5>Errors summary</h5>
                        <span class="badge alert">{{ warnings|length }}</span> errors.
                    </div>
                    {% for warning in warnings %}
                        <div class="callout alert hide" id="warning-{{ warning.index }}">
                            <p>{{ warning.comment }}</p>
                            <p class="warning-snippet"><i>{{ warning.snippet }}</i></p>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="callout success">
                        <p>Aucun problème rencontré</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </form>
{% endblock %}
